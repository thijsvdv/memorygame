!function e(t,i,n){function a(o,r){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!r&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};t[o][0].call(l.exports,function(e){var i=t[o][1][e];return a(i?i:e)},l,l.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={num_rows:4,num_cols:4,tile_width:document.getElementById("game").offsetWidth/4,tile_height:document.getElementById("game").offsetWidth/4,images:["../img/tiles/img1","../img/tiles/img2","../img/tiles/img3","../img/tiles/img4","../img/tiles/img5","../img/tiles/img6","../img/tiles/img7","../img/tiles/img8"],hashids:{salt:"sgdN78tYeYd3rGIyMVDW2CWetDHq8xp5",length:8,alphabet:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"}};i["default"]=n},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()},a=function(e){var t=e+".jpg",i=new Image;return i.src=t,i};i.helpers=n,i.getImage=a},{}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./tile"),s=n(a),o=e("./config"),r=n(o),u=e("./helpers");$(function(){FastClick.attach(document.body)}),(0,u.helpers)();var c=function(){function e(e){o=setTimeout(function(){for(var e=0;e<d.length;e++)d[e].isMatch||d[e].fix||d[e].drawFaceDown();h=[]},e)}function t(e,t){if(t){$("#game").addClass("done"),$(".overlay").addClass("active");var i=[(f+"").slice(0,-2),(f+"").slice(-2)];$(".is-time").text(i[0]+"' "+i[1]+'"'),$(".is-clicks").text(m),setTimeout(function(){$(".points").removeClass("active"),$(".overlay").addClass("fadein"),$("body").addClass("is-finished")},1e3)}}$("#game").replaceWith('<canvas id="game"></canvas>');var i=document.getElementById("game"),n=i.getContext("2d"),a=(new Image,!1),o=void 0,c=0,l=0,f=0,d=[],h=[],m=0,g=0,w=document.getElementById("game").offsetWidth;document.getElementById("game").width=w,document.getElementById("game").height=w,n.fillStyle="#ffffff",n.fillRect(0,0,w,w);for(var v=r["default"].images.map(function(e){return(0,u.getImage)(e)}),p=v.slice(0),y=[],_=0;_<r["default"].num_cols*r["default"].num_rows/2;_++){var x=Math.floor(p.length*Math.random(p.length)),M=p[x];y.push(M),y.push(M),p.splice(x,1)}y.sort(function(){return.5-Math.random()});for(var F=0;F<r["default"].num_cols;F++)for(var b=0;b<r["default"].num_rows;b++)d.push(new s["default"]({x:F*r["default"].tile_width,y:b*r["default"].tile_height,face:y.pop(),context:n}));for(var C=0;C<d.length;C++)d[C].drawFaceDown();h=[],m=0,g=0,i.addEventListener("click",function(i){if(!a){var n;!function(){var e=function(e){return 10>e?"0"+e:e},t=function s(){window.requestAnimFrame(function(){new Date;l=(new Date).getTime()-i;var t=new Date(l);c=Math.floor(l/10),$(".user__time").text(e(t.getMinutes())+":"+e(t.getSeconds())),a&&s()})};n=new Hashids(r["default"].hashids.salt,r["default"].hashids.length,r["default"].hashids.alphabet),a=!0,$(".points").addClass("active");var i=((new Date).getMinutes(),(new Date).getSeconds(),(new Date).getTime());t()}()}if(2===h.length){console.log(h),clearTimeout(o);for(var s=0;s<h.length;s++)h[s].isMatch||h[s].drawFaceDown();h=[]}for(var u=0;u<d.length;u++)d[u].isUnderMouse(i.offsetX,i.offsetY)&&(d[u].isFaceUp||h.length<2&&(d[u].drawFaceUp(),h.push(d[u]),2===h.length&&(m++,$(".user__clicks").text(m),h[0].face===h[1].face?(h[0].isMatch=!0,h[1].isMatch=!0):requestAnimFrame(function(){e(1e3)}))));for(var g=!0,w=0;w<d.length;w++)g=g&&d[w].isMatch;if(g){var n=new Hashids(r["default"].hashids.salt,r["default"].hashids.length,r["default"].hashids.alphabet);a=!1,f=l+"",f=f.slice(0,-1),t({clicks:m,time:f,nonce:n.encode([m,c])},!0)}})};$(".js-restart").click(function(e){e.preventDefault(),$(".user__time").text("00:00"),$(".user__clicks").text("0"),$("#game").removeClass("done"),$(".overlay").removeClass("active"),$(".overlay").removeClass("fadein"),$("body").removeClass("is-finished"),c()}),c()},{"./config":1,"./helpers":2,"./tile":4}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("./config"),r=n(o),u=function(){function e(t,i){a(this,e),this.x=t.x,this.y=t.y,this.face=t.face,this.isFaceUp=!1,this.isMatch=!1,this.width=r["default"].tile_width,this.context=t.context}return s(e,[{key:"drawFaceDown",value:function(){var e=this,t=new Image;t.src="../img/tiles/tile.jpg",t.width=this.width,t.onload=function(){e.context.clearRect(e.x,e.y,e.width,e.height),e.context.globalCompositeOperation="source-atop",e.context.drawImage(t,e.x,e.y,e.width,e.width)},this.isFaceUp=!1}},{key:"drawFaceUp",value:function(){var e=this;this.context.fillStyle="white",setTimeout(function(){e.context.drawImage(e.face,e.x,e.y,e.width,e.width),e.isFaceUp=!0},100)}},{key:"isUnderMouse",value:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.width}}]),e}();i["default"]=u},{"./config":1}]},{},[3]);